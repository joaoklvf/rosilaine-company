<h1 class="text-white print-hidden">{{ title }}</h1>

<div
  class="w-full p-4 bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700 mb-3"
>
  <mat-tab-group (selectedTabChange)="checkToFetchData($event.index)">
    <mat-tab label="Dados" labelClass="mb-1" [labelClass]="'print-hidden'">
      <div class="data-tab">
        <div class="grid gap-6 mb-6 md:grid-cols-4">
          <div>
            <label
              class="block text-sm font-medium text-gray-900 dark:text-white"
              for="customer-name"
              >Nome</label
            >
            <input
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
              id="customer-name"
              placeholder="Nome"
              [(ngModel)]="customer.name"
              [maxLength]="60"
              name="name"
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-900 dark:text-white"
              for="customer-name"
              >Apelido</label
            >
            <input
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
              id="customer-customer_nick_name"
              placeholder="Apelido"
              [(ngModel)]="customer.customer_nick_name"
              [maxLength]="60"
              name="customer_nick_name"
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-900 dark:text-white"
              for="customer-birth-date"
              >Data de nascimento</label
            >
            <input
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
              id="customer-birth-date"
              placeholder="dd/mm/aaaa"
              name="birth-date"
              mask="00/00/0000"
              matInput
              [dropSpecialCharacters]="false"
              [(ngModel)]="customer.birthDate"
              [maxLength]="60"
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-900 dark:text-white"
              for="customer-phone"
              >Telefone</label
            >
            <input
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
              id="customer-phone"
              type="text"
              mask="(00) 00000-0000"
              matInput
              placeholder="(99) 99999-9999"
              [dropSpecialCharacters]="false"
              [(ngModel)]="customer.phone"
              [maxLength]="60"
            />
          </div>
        </div>
        <div class="grid gap-6 mb-6 md:grid-cols-4" [formGroup]="address">
          <div>
            <label
              class="block text-sm font-medium text-gray-900 dark:text-white"
              for="customer-zip-code"
              >CEP</label
            >
            <input
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
              id="customer-zip-code"
              placeholder="CEP"
              name="zip-code"
              type="text"
              mask="00000-000"
              matInput
              [dropSpecialCharacters]="false"
              (blur)="getAddressByZipCode()"
              formControlName="zipCode"
              [maxLength]="10"
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-900 dark:text-white"
              for="customer-state"
              >Estado (UF)</label
            >
            <input
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
              id="customer-state"
              placeholder="Estado (UF)"
              name="state"
              [maxLength]="2"
              formControlName="state"
              (keyup)="upper($event)"
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-900 dark:text-white"
              for="customer-city"
              >Cidade</label
            >
            <input
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
              [maxLength]="60"
              id="customer-city"
              placeholder="Cidade"
              name="city"
              formControlName="city"
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-900 dark:text-white"
              for="customer-neighborhood"
              >Bairro</label
            >
            <input
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
              [maxLength]="60"
              id="customer-neighborhood"
              placeholder="Bairro"
              name="neighborhood"
              formControlName="neighborhood"
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-900 dark:text-white"
              for="customer-street"
              >Rua</label
            >
            <input
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
              [maxLength]="60"
              id="customer-street"
              placeholder="Rua"
              name="street"
              formControlName="street"
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-900 dark:text-white"
              for="customer-house-number"
              >Número</label
            >
            <input
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
              [maxLength]="60"
              id="customer-house-number"
              placeholder="Número"
              [(ngModel)]="customer.houseNumber"
              name="house-number"
              [ngModelOptions]="{ standalone: true }"
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-900 dark:text-white"
              for="customer-complemento"
              >Complemento</label
            >
            <input
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
              id="customer-complemento"
              placeholder="Complemento"
              name="complemento"
              [(ngModel)]="customer.complemento"
              [maxLength]="60"
              [ngModelOptions]="{ standalone: true }"
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-900 dark:text-white"
              for="customer-address-observation"
              >Observação</label
            >
            <input
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
              id="customer-address-observation"
              placeholder="Observação"
              [(ngModel)]="customer.addressObservation"
              [maxLength]="60"
              name="address-observation"
              [ngModelOptions]="{ standalone: true }"
            />
          </div>
        </div>
        <div class="w-full">
          <app-custom-chips-autocomplete
            [data]="tags"
            (handleOnChange)="setTags($event)"
            displayValue="description"
            label="Tags"
            [defaultValue]="customer.tags"
          />
        </div>
        <div class="mt-3 text-end">
          <button
            type="button"
            class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
            (click)="add()"
          >
            {{ buttonText }}
          </button>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="Dashboard" [labelClass]="'print-hidden'">
      <div class="data-tab">
        <app-installments-dashboard
          [columns]="columns"
          [dashInstallments]="dashInstallments"
          [dataCount]="dataCount"
          [installmentsBalance]="installmentsBalance"
          [installmentsTotal]="installmentsTotal"
          [pendingInstallments]="pendingInstallments"
          (getInstallmentsData)="getInstallmentsData($event)"
        />
      </div>
    </mat-tab>
    <mat-tab label="Total do mês" class="print-main">
      <div class="mb-3 mt-2">
        <h2>{{ customer.name }}</h2>
        <mat-form-field>
          <mat-label>Mês</mat-label>
          <mat-select
            (selectionChange)="fetchMonthInstallments($event.value)"
            [value]="selectMonthValue"
          >
            <mat-option value="01">Janeiro</mat-option>
            <mat-option value="02">Fevereiro</mat-option>
            <mat-option value="03">Março</mat-option>
            <mat-option value="04">Abril</mat-option>
            <mat-option value="05">Maio</mat-option>
            <mat-option value="06">Junho</mat-option>
            <mat-option value="07">Julho</mat-option>
            <mat-option value="08">Agosto</mat-option>
            <mat-option value="09">Setembro</mat-option>
            <mat-option value="10">Outubro</mat-option>
            <mat-option value="11">Novembro</mat-option>
            <mat-option value="12">Dezembro</mat-option>
          </mat-select>
        </mat-form-field>
        <button
          type="button"
          class="text-blue-700 hover:text-white border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 dark:border-blue-500 dark:text-blue-500 dark:hover:text-white dark:hover:bg-blue-500 dark:focus:ring-blue-800 print-hidden ms-2"
          (click)="print()"
        >
          <mat-icon fontIcon="print" />
        </button>
      </div>
      <app-customer-month-table [monthInstallments]="monthInstallments" />
      <h2>
        Total do mês: <b>{{ monthInstallmentsCurrencyValue }}</b>
      </h2>
    </mat-tab>
  </mat-tab-group>
</div>
